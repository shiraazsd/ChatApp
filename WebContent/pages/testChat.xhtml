<?xml version='1.0' encoding='UTF-8' ?>
<!--
Author: Prasanna Bhale
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1"></meta>
	<title>JSF and WebSocket Demo using JEE7</title>
	<link href="#{request.contextPath}/css/bootstrap.min.css"
		rel="stylesheet" />
	<link href="#{request.contextPath}/css/custom.css" rel="stylesheet"
		type="text/css" />
	<link href="#{request.contextPath}/testchat.css" rel="stylesheet"
		type="text/css" />
	<link href="#{request.contextPath}/fonts/css/font-awesome.min.css"
		rel="stylesheet" type="text/css" />
	<link href="#{request.contextPath}/css/custom-style.css"
		rel="stylesheet" type="text/css" />


</h:head>

<h:body>
	<div class="row">
		<span class="col-md-6">
			Logged In : <span id="loggedInUser"><h:outputText value="#{request.remoteUser}"/></span>		
		</span>

		<span class="col-md-4">
		</span>
		<span class="col-md-2">

 			<div class="datagrid">	
				<p:dataTable var="user" value="#{userBean.getAllAvailableUsers(request.remoteUser)}" id="usersDataTable" scrollable="true" scrollHeight="600">		 
				    <p:column headerText="USERS">
				        <h:outputText value="#{user.email}"/>
				    </p:column>
				</p:dataTable>
			</div>						 
			<h:inputHidden id="user" value="#{request.remoteUser}"></h:inputHidden>
		</span>
	</div>
	<div class="row">
	
		<div class="container" id="chatBoxContainer">
		</div>
	</div>


	<script src="#{request.contextPath}/js/jquery.min.js"></script>
	<script src="#{request.contextPath}/testchat.js"></script>
	<script
		src="#{request.contextPath}/js/modules/chatsocket/chatsocket.js"></script>
	<script type="text/javascript"
		src="#{request.contextPath}/js/nicescroll/jquery.nicescroll.min.js"></script>
	<script src="#{request.contextPath}/js/bootstrap.min.js"></script>
	<script type="text/javascript"
		src="#{request.contextPath}/js/custom.js"></script>
	<script type="text/javascript"
		src="#{request.contextPath}/js/chatplugin.js"></script>
	<script type="text/javascript"
		src="#{request.contextPath}/js/mustache.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/chatLogic.js">
	</script>
	<script type="text/template" id="chat-window-template">
			<div class="row chat-window col-xs-5 col-md-3" id="{{chat_window_id}}">
				<div class="col-xs-12 col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading top-bar">
							<div class="col-md-8 col-xs-8">
								<h3 class="panel-title">
									<span class="glyphicon glyphicon-comment"></span> {{chat_user_email}}
								</h3>
							</div>
							<div class="col-md-4 col-xs-4" style="text-align: right;">
								<a href="#"><span id="{{minim_id}}"
									class="glyphicon glyphicon-minus icon_minim"></span></a> <a href="#"><span
									class="glyphicon glyphicon-remove icon_close"
									data-id="{{chat_window_id}}"></span></a>
							</div>
						</div>
						<div class="panel-body msg_container_base" id="{{msg_panel_id}}">
						</div>
						<div id="{{loader_id}}" class="loader">
						</div>
						<div class="panel-footer">
							<div class="input-group">
								<input id="{{btn_input_id}}" type="text"
									class="form-control input-sm chat_input"
									placeholder="Write your message here..." /> <span
									class="input-group-btn">
									<button class="btn btn-primary btn-sm btn-chat-send" id="btn-chat" data-id-email="{{chat_user_email}}" data-id="{{btn_input_id}}" data-id-msg-panel="{{msg_panel_id}}">Send</button>
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
	</script>			

</h:body>
</html>